{"ast":null,"code":"var _jsxFileName = \"/opt/tezos/nft-shop-example/src/components/BuyNFT.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst columns = [{\n  field: 'id',\n  headerName: 'ID',\n  width: 200\n}, {\n  field: 'stock',\n  headerName: 'Stock',\n  width: 300\n}, {\n  field: 'price',\n  headerName: 'Price',\n  width: 300\n}, {\n  field: 'address',\n  headerName: 'NFT address',\n  width: 500\n}];\n\nconst BuyNFT = ({\n  contract,\n  setUserBalance,\n  Tezos,\n  userAddress,\n  setStorage,\n  setNftList,\n  nftList\n}) => {\n  _s();\n\n  const [loadingBuy, setLoadingBuy] = useState(false);\n  const [id, setId] = useState(0); // const [loadingDecrement, setLoadingDecrement] = useState<boolean>(false);\n\n  const buy_nft = async () => {\n    setLoadingBuy(true);\n\n    try {\n      const op = await contract.methods.default(id).send({});\n      console.log(contract.methods);\n      await op.confirmation();\n      const newStorage = await contract.storage();\n      if (newStorage) setStorage(newStorage);\n      let newNftList = [];\n      newStorage.forEach((value, key, idx) => {\n        newNftList.push({\n          id: key,\n          stock: value.current_stock.toNumber(),\n          price: value.token_price.toNumber(),\n          address: value.token_address\n        });\n      });\n      setNftList(newNftList);\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingBuy(false);\n    }\n  };\n  /*\n    const increment = async (): Promise<void> => {\n      setLoadingIncrement(true);\n      try {\n        const op = await contract.methods.increment(1).send();\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage.toNumber());\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingIncrement(false);\n      }\n    };\n  \n    const decrement = async (): Promise<void> => {\n      setLoadingDecrement(true);\n      try {\n        const op = await contract.methods.decrement(1).send();\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage.toNumber());\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingDecrement(false);\n      }\n    };\n  */\n\n\n  if (!contract && !userAddress) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\xA0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 41\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\xA0\", nftList ? /*#__PURE__*/_jsxDEV(NFT_List, {\n      list: nftList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this) : \"None\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 8\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \" Enter Nft ID to buy \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 8\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"NFT ID\",\n      value: id,\n      onChange: e => setId(parseInt(e.target.value, 10))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: buy_nft,\n      children: loadingBuy ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), \"\\xA0 Please wait\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), \"\\xA0 Buy NFT\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BuyNFT, \"Bz8XVncSajbTcsIzBjDmox5n3GM=\");\n\n_c = BuyNFT;\nexport default BuyNFT;\n\nvar _c;\n\n$RefreshReg$(_c, \"BuyNFT\");","map":{"version":3,"sources":["/opt/tezos/nft-shop-example/src/components/BuyNFT.tsx"],"names":["React","useState","columns","field","headerName","width","BuyNFT","contract","setUserBalance","Tezos","userAddress","setStorage","setNftList","nftList","loadingBuy","setLoadingBuy","id","setId","buy_nft","op","methods","default","send","console","log","confirmation","newStorage","storage","newNftList","forEach","value","key","idx","push","stock","current_stock","toNumber","price","token_price","address","token_address","tz","getBalance","error","e","parseInt","target"],"mappings":"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","sourcesContent":["import React, { useState, Dispatch, SetStateAction } from \"react\";\nimport { TezosToolkit, WalletContract } from \"@taquito/taquito\";\nimport { DataGrid } from '@material-ui/data-grid';\n\n\nconst columns = [\n  { field: 'id', headerName: 'ID', width: 200 },\n  {\n    field: 'stock',\n    headerName: 'Stock',\n    width: 300,\n  },\n  {\n    field: 'price',\n    headerName: 'Price',\n    width: 300,\n\n  },\n  {\n    field: 'address',\n    headerName: 'NFT address',\n    width: 500,\n  },\n];\n\ninterface BuyNFTProps {\n  contract: WalletContract | any;\n  setUserBalance: Dispatch<SetStateAction<any>>;\n  Tezos: TezosToolkit;\n  userAddress: string;\n  setStorage: Dispatch<SetStateAction<any>>;\n  setNftList: Dispatch<SetStateAction<any>>;\n  nftList: Object[];\n}\n\nconst BuyNFT = ({ contract, setUserBalance, Tezos, userAddress, setStorage, setNftList, nftList}: BuyNFTProps) => {\n  const [loadingBuy, setLoadingBuy] = useState<boolean>(false);\n  const [id, setId] = useState<number>(0);\n\n  // const [loadingDecrement, setLoadingDecrement] = useState<boolean>(false);\n\n  const buy_nft = async (): Promise<void> => {\n      setLoadingBuy(true);\n      try {\n        const op = await contract.methods.default(id).send(\n          {\n          });\n        console.log(contract.methods);\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage);\n        let newNftList: Object[] = [];\n        newStorage.forEach( (value: any, key: number, idx: any) => {\n          newNftList.push({id: key, stock:value.current_stock.toNumber(), price:value.token_price.toNumber(), address:value.token_address});\n        });\n        setNftList(newNftList);\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingBuy(false);\n      }\n\n  };\n\n/*\n  const increment = async (): Promise<void> => {\n    setLoadingIncrement(true);\n    try {\n      const op = await contract.methods.increment(1).send();\n      await op.confirmation();\n      const newStorage: any = await contract.storage();\n      if (newStorage) setStorage(newStorage.toNumber());\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingIncrement(false);\n    }\n  };\n\n  const decrement = async (): Promise<void> => {\n    setLoadingDecrement(true);\n    try {\n      const op = await contract.methods.decrement(1).send();\n      await op.confirmation();\n      const newStorage: any = await contract.storage();\n      if (newStorage) setStorage(newStorage.toNumber());\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingDecrement(false);\n    }\n  };\n*/\n\n  if (!contract && !userAddress) return <div>&nbsp;</div>;\n  return (\n    <div>\n      &nbsp;\n      { nftList ? \n        <NFT_List \n          list={nftList}\n        />\n       : \"None\"\n      }\n\n       <br/>\n       <br/>\n       <br/>\n      &nbsp;<span> Enter Nft ID to buy </span>\n       <br/>\n       <br/>\n      &nbsp;<input\n        type=\"number\"\n        placeholder=\"NFT ID\"\n        value={id}\n        onChange={e => setId(parseInt(e.target.value,10))}\n      />\n      &nbsp;<button \n        className=\"button\" \n        onClick={buy_nft}\n      >\n        {loadingBuy ? (\n          <span>\n            <i className=\"fas fa-spinner fa-spin\"></i>&nbsp; Please wait\n          </span>\n        ) : (\n          <span>\n            <i className=\"fas fa-plus\"></i>&nbsp; Buy NFT\n          </span>\n        )}\n      </button>\n    </div>\n  );\n};\n\nexport default BuyNFT;\n"]},"metadata":{},"sourceType":"module"}