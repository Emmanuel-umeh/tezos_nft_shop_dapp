{"ast":null,"code":"var _jsxFileName = \"/opt/tezos/nft-shop-example/src/components/BuyNFT.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UpdateContract = ({\n  contract,\n  setUserBalance,\n  Tezos,\n  userAddress,\n  setStorage\n}) => {\n  _s();\n\n  const [loadingBuy, setLoadingBuy] = useState(false);\n  const [id, setId] = useState(); // const [loadingDecrement, setLoadingDecrement] = useState<boolean>(false);\n\n  const buy_nft = async () => {\n    if (id) {\n      setLoadingBuy(true);\n\n      try {\n        const op = await contract.methods.default(id.toString());\n        await op.confirmation();\n        const newStorage = await contract.storage();\n        if (newStorage) setStorage(newStorage);\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingBuy(false);\n      }\n    }\n  };\n  /*\n    const increment = async (): Promise<void> => {\n      setLoadingIncrement(true);\n      try {\n        const op = await contract.methods.increment(1).send();\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage.toNumber());\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingIncrement(false);\n      }\n    };\n  \n    const decrement = async (): Promise<void> => {\n      setLoadingDecrement(true);\n      try {\n        const op = await contract.methods.decrement(1).send();\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage.toNumber());\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingDecrement(false);\n      }\n    };\n  */\n\n\n  if (!contract && !userAddress) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\xA0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 41\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"buttons\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"NFT ID\",\n      value: id,\n      onChange: e => setId(parseInt(e.target.value, 10))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: buy_nft,\n      children: loadingBuy ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), \"\\xA0 Please wait\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), \"\\xA0 Buy NFT\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UpdateContract, \"BUKrI4WiVCJxFVwczbaDYnUte20=\");\n\n_c = UpdateContract;\nexport default UpdateContract;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateContract\");","map":{"version":3,"sources":["/opt/tezos/nft-shop-example/src/components/BuyNFT.tsx"],"names":["React","useState","UpdateContract","contract","setUserBalance","Tezos","userAddress","setStorage","loadingBuy","setLoadingBuy","id","setId","buy_nft","op","methods","default","toString","confirmation","newStorage","storage","tz","getBalance","error","console","log","e","parseInt","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAA0D,OAA1D;;;AAWA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,cAAZ;AAA4BC,EAAAA,KAA5B;AAAmCC,EAAAA,WAAnC;AAAgDC,EAAAA;AAAhD,CAAD,KAAsF;AAAA;;AAC3G,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BR,QAAQ,CAAU,KAAV,CAA5C;AACA,QAAM,CAACS,EAAD,EAAKC,KAAL,IAAcV,QAAQ,EAA5B,CAF2G,CAG3G;;AAEA,QAAMW,OAAO,GAAG,YAA2B;AACzC,QAAIF,EAAJ,EAAQ;AACJD,MAAAA,aAAa,CAAC,IAAD,CAAb;;AACF,UAAI;AACF,cAAMI,EAAE,GAAG,MAAMV,QAAQ,CAACW,OAAT,CAAiBC,OAAjB,CAAyBL,EAAE,CAACM,QAAH,EAAzB,CAAjB;AACA,cAAMH,EAAE,CAACI,YAAH,EAAN;AACA,cAAMC,UAAe,GAAG,MAAMf,QAAQ,CAACgB,OAAT,EAA9B;AACA,YAAID,UAAJ,EAAgBX,UAAU,CAACW,UAAD,CAAV;AAChBd,QAAAA,cAAc,CAAC,MAAMC,KAAK,CAACe,EAAN,CAASC,UAAT,CAAoBf,WAApB,CAAP,CAAd;AACD,OAND,CAME,OAAOgB,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OARD,SAQU;AACRb,QAAAA,aAAa,CAAC,KAAD,CAAb;AACD;AACF;AAEF,GAhBD;AAkBF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEE,MAAI,CAACN,QAAD,IAAa,CAACG,WAAlB,EAA+B,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAC/B,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA,4BACE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,WAAW,EAAC,QAFd;AAGE,MAAA,KAAK,EAAEI,EAHT;AAIE,MAAA,QAAQ,EAAEe,CAAC,IAAId,KAAK,CAACe,QAAQ,CAACD,CAAC,CAACE,MAAF,CAASC,KAAV,EAAgB,EAAhB,CAAT;AAJtB;AAAA;AAAA;AAAA;AAAA,YADF,eAOE;AACE,MAAA,SAAS,EAAC,QADZ;AAEE,MAAA,OAAO,EAAEhB,OAFX;AAAA,gBAIGJ,UAAU,gBACT;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADF;AAAA;AAAA;AAAA;AAAA;AAAA,cADS,gBAKT;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADF;AAAA;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD,CAhFD;;GAAMN,c;;KAAAA,c;AAkFN,eAAeA,cAAf","sourcesContent":["import React, { useState, Dispatch, SetStateAction } from \"react\";\nimport { TezosToolkit, WalletContract } from \"@taquito/taquito\";\n\ninterface UpdateContractProps {\n  contract: WalletContract | any;\n  setUserBalance: Dispatch<SetStateAction<any>>;\n  Tezos: TezosToolkit;\n  userAddress: string;\n  setStorage: Dispatch<SetStateAction<any>>;\n}\n\nconst UpdateContract = ({ contract, setUserBalance, Tezos, userAddress, setStorage}: UpdateContractProps) => {\n  const [loadingBuy, setLoadingBuy] = useState<boolean>(false);\n  const [id, setId] = useState<number>();\n  // const [loadingDecrement, setLoadingDecrement] = useState<boolean>(false);\n\n  const buy_nft = async (): Promise<void> => {\n    if (id) {\n        setLoadingBuy(true);\n      try {\n        const op = await contract.methods.default(id.toString());\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage);\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoadingBuy(false);\n      }\n    }\n\n  };\n\n/*\n  const increment = async (): Promise<void> => {\n    setLoadingIncrement(true);\n    try {\n      const op = await contract.methods.increment(1).send();\n      await op.confirmation();\n      const newStorage: any = await contract.storage();\n      if (newStorage) setStorage(newStorage.toNumber());\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingIncrement(false);\n    }\n  };\n\n  const decrement = async (): Promise<void> => {\n    setLoadingDecrement(true);\n    try {\n      const op = await contract.methods.decrement(1).send();\n      await op.confirmation();\n      const newStorage: any = await contract.storage();\n      if (newStorage) setStorage(newStorage.toNumber());\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingDecrement(false);\n    }\n  };\n*/\n\n  if (!contract && !userAddress) return <div>&nbsp;</div>;\n  return (\n    <div className=\"buttons\">\n      <input\n        type=\"number\"\n        placeholder=\"NFT ID\"\n        value={id}\n        onChange={e => setId(parseInt(e.target.value,10))}\n      />\n      <button \n        className=\"button\" \n        onClick={buy_nft}\n      >\n        {loadingBuy ? (\n          <span>\n            <i className=\"fas fa-spinner fa-spin\"></i>&nbsp; Please wait\n          </span>\n        ) : (\n          <span>\n            <i className=\"fas fa-plus\"></i>&nbsp; Buy NFT\n          </span>\n        )}\n      </button>\n    </div>\n  );\n};\n\nexport default UpdateContract;\n"]},"metadata":{},"sourceType":"module"}