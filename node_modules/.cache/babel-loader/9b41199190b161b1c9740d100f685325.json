{"ast":null,"code":"var _jsxFileName = \"/opt/tezos/nft-shop-example/src/components/RecoverNFT.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecoverNFT = ({\n  contract,\n  setUserBalance,\n  Tezos,\n  userAddress,\n  setStorage,\n  setNftList\n}) => {\n  _s();\n\n  const [loadingBuy, setLoadingBuy] = useState(false);\n  const [id, setId] = useState();\n  const [transactionInProgress, setTransactionInProgress] = useState(false);\n  const toastId = React.useRef(null);\n  useEffect(() => {\n    if (transactionInProgress && !toastId.current) {\n      toastId.current = toast.info('Transaction in progress. Confirm signing dialog and please wait...', {\n        position: 'top-right',\n        autoClose: false,\n        hideProgressBar: false,\n        closeOnClick: false,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        closeButton: false\n      });\n    } else if (!transactionInProgress && toastId.current) {\n      toast.dismiss(toastId.current);\n      toastId.current = null;\n    }\n  }, [transactionInProgress, toastId.current]);\n\n  const recover_nft = async () => {\n    setLoadingBuy(true);\n    setTransactionInProgress(true);\n\n    try {\n      const op = await contract.methods.recover(id).send();\n      await op.confirmation();\n      const newStorage = await contract.storage();\n      if (newStorage) setStorage(newStorage);\n      let newNftList = [];\n      newStorage.forEach((value, key, idx) => {\n        newNftList.push({\n          id: key,\n          stock: value.current_stock.toNumber(),\n          price: value.token_price.toNumber() / 1000000,\n          address: value.token_address,\n          admin: value.token_admin\n        });\n      });\n      setNftList(newNftList);\n      setUserBalance(await Tezos.tz.getBalance(userAddress));\n      toast(\"Successfully recovered your nft\", {\n        type: \"success\"\n      });\n    } catch (error) {\n      console.log(error);\n      toast.error('There was an error sending your transaction. Please check developer console.');\n    } finally {\n      setTransactionInProgress(false);\n      setLoadingBuy(false);\n    }\n  };\n\n  if (!contract && !userAddress) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\xA0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 41\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\xA0\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 8\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \" Enter Nft ID to recover \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 8\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"NFT ID\",\n      value: id,\n      onChange: e => setId(parseInt(e.target.value, 10))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: recover_nft,\n      children: loadingBuy ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), \"\\xA0 Please wait\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), \"\\xA0 Recover NFT\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RecoverNFT, \"DQT1CLrNdzc5VVLrWT6Evwj3BBg=\");\n\n_c = RecoverNFT;\nexport default RecoverNFT;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecoverNFT\");","map":{"version":3,"sources":["/opt/tezos/nft-shop-example/src/components/RecoverNFT.tsx"],"names":["React","useState","toast","RecoverNFT","contract","setUserBalance","Tezos","userAddress","setStorage","setNftList","loadingBuy","setLoadingBuy","id","setId","transactionInProgress","setTransactionInProgress","toastId","useRef","useEffect","current","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","closeButton","dismiss","recover_nft","op","methods","recover","send","confirmation","newStorage","storage","newNftList","forEach","value","key","idx","push","stock","current_stock","toNumber","price","token_price","address","token_address","admin","token_admin","tz","getBalance","type","error","console","log","e","parseInt","target"],"mappings":"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","sourcesContent":["import React, { useState, Dispatch, SetStateAction } from \"react\";\nimport { TezosToolkit, WalletContract } from \"@taquito/taquito\";\nimport { ToastContainer, toast } from 'react-toastify';\n\ninterface RecoverNFTProps {\n  contract: WalletContract | any;\n  setUserBalance: Dispatch<SetStateAction<any>>;\n  Tezos: TezosToolkit;\n  userAddress: string;\n  setStorage: Dispatch<SetStateAction<any>>;\n  setNftList: Dispatch<SetStateAction<any>>;\n}\n\nconst RecoverNFT = ({ contract, setUserBalance, Tezos, userAddress, setStorage, setNftList}: RecoverNFTProps) => {\n  const [loadingBuy, setLoadingBuy] = useState<boolean>(false);\n  const [id, setId] = useState<number>();\n  const [transactionInProgress, setTransactionInProgress] = useState(false);\n  const toastId: any = React.useRef(null);\n\n\n\n  useEffect(() => {\n      if (transactionInProgress && !toastId.current) {\n          toastId.current = toast.info(\n              'Transaction in progress. Confirm signing dialog and please wait...',\n              {\n                  position: 'top-right',\n                  autoClose: false,\n                  hideProgressBar: false,\n                  closeOnClick: false,\n                  pauseOnHover: true,\n                  draggable: true,\n                  progress: undefined,\n                  closeButton: false\n              }\n          );\n      } else if (!transactionInProgress && toastId.current) {\n          toast.dismiss(toastId.current);\n          toastId.current = null;\n      }\n  }, [transactionInProgress, toastId.current]);\n\n  const recover_nft = async (): Promise<void> => {\n      setLoadingBuy(true);\n      setTransactionInProgress(true);\n      try {\n        const op = await contract.methods.recover(id).send();\n\n        await op.confirmation();\n        const newStorage: any = await contract.storage();\n        if (newStorage) setStorage(newStorage);\n        let newNftList: any = [];\n        newStorage.forEach( (value: any, key: number, idx: any) => {\n          newNftList.push({id: key, stock:value.current_stock.toNumber(), price:value.token_price.toNumber() /1000000, address:value.token_address, admin: value.token_admin});\n        });\n        setNftList(newNftList);\n        setUserBalance(await Tezos.tz.getBalance(userAddress));\n        toast(\"Successfully recovered your nft\", {type:\"success\"});\n      } catch (error) {\n        console.log(error);\n        toast.error(\n          'There was an error sending your transaction. Please check developer console.'\n        );\n      } finally {\n        setTransactionInProgress(false);\n        setLoadingBuy(false);\n      }\n\n  };\n\n\n  if (!contract && !userAddress) return <div>&nbsp;</div>;\n  return (\n    <div>\n      &nbsp;\n\n       <br/>\n       <br/>\n       <br/>\n      &nbsp;<span> Enter Nft ID to recover </span>\n       <br/>\n       <br/>\n      &nbsp;<input\n        type=\"number\"\n        placeholder=\"NFT ID\"\n        value={id}\n        onChange={e => setId(parseInt(e.target.value,10))}\n      />\n      &nbsp;<button \n        className=\"button\" \n        onClick={recover_nft}\n      >\n        {loadingBuy ? (\n          <span>\n            <i className=\"fas fa-spinner fa-spin\"></i>&nbsp; Please wait\n          </span>\n        ) : (\n          <span>\n            <i className=\"fas fa-plus\"></i>&nbsp; Recover NFT\n          </span>\n        )}\n      </button>\n    </div>\n  );\n};\n\nexport default RecoverNFT;"]},"metadata":{},"sourceType":"module"}